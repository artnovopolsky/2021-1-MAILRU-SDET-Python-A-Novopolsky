# Описание работы скриптов
## Bash-скрипт
Скрипт расположен в директории ```bash/``` и запускается с помощью следующей
команды (запускать можно откуда угодно, главное правильно указать путь к файлу и не забыть про точку в начале): ```./analysis_of_logs.sh```

Результат исполнения скрипта лежит в файле ```results/bash_results.txt```

*Решение каждого задания в скрипте отмечено комментарием.*

### Задание 1 - Общее количество запросов
С помощью утилиты ```wc -l``` считаем количество строк в файле. Выводим только требуемую информацию с помощью ```awk``` и перенаправляем её в файл результата.

### Задание 2 - Общее количество запросов по типу
Считываем файл логов с помощью утилиты ```cat```, с помощью ```awk``` оставляем только столбец с типом запроса,
далее с помощью ```sed``` отрезаем мусор в виде символа ```"``` в начале каждого типа запроса. 

Сортируем получившийся столбец 
(т.к. следующий шаг возможен только с отсортированной последовательностью), далее с помощью утилиты ```uniq -c``` подсчитываем 
количество вхождений каждого типа запроса и сортируем их в обратном порядке (```sort -rnk1```) по количеству вхождений. 
Форматируем вывод с помощью ```awk``` и перенаправляем в файл результата.

### Задание 3 - Топ 10 самых частых запросов
Считываем файл с помощью ```cat```, через утилиту ```awk``` оставляем только столбец с URL-ами, сортируем его, 
затем с помощью ```uniq -c``` подсчитываем количество вхождений каждого URL, после чего сортируем в обратном порядке 
по количеству вхождений (```sort -nrk1```) и оставляем только 10 самых частых встречающихся URL-ов 
с помощью утилиты ```head```, далее форматируем вывод с помощью ```awk``` и перенаправляем в файл результата.

### Задание 4 - Топ 5 самых больших по размеру запросов, которые завершились клиентской (4ХХ) ошибкой
С помощью ```cat``` считываем файл, через ```awk``` фильтруем входные данные по коду ответа ```4xx``` 
и оставляем только столбцы с URL, кодом ответа, размером и IP. Полученную выборку сортируем в обратном порядке 
по значению столбца размера (```sort -rnk3```) и оставляем только первые пять результатов (```head -n 5```). 
Форматируем вывод с помощью ```awk``` и перенаправляем в файл результата.

### Задание 5 - Топ 5 пользователей по количеству запросов, которые завершились серверной (5ХХ) ошибкой
Считываем файл логов с помощью ```cat```, через ```awk``` фильтруем входные данные по коду ответа ```5xx``` и получаем
только столбец с IP подходящих строк. Полученную выборку сортируем, затем получаем количество уникальных вхождений IP-адресов с помощью ```uniq -c```,
после чего сортируем в обратном порядке (```sort -rnk1```) и оставляем только первые пять результатов (```head -n 5```). 
Форматируем вывод с помощью ```awk``` и перенаправляем в файл результата.


## Python-скрипт
Скрипт расположен в директории ```python/``` и запускается с помощью команды:

```python analysis_of_logs.py [--json]``` 

При запуске с опцией ```--json``` результат будет выводиться в файл ```results/python_results.json```.

При обычном запуске результат будет выводиться в файл ```results/python_results.txt```.

*Решение каждого задания в скрипте вынесено в отдельную функцию.*

### Задание 1 - Общее количество запросов
С помощью функции ```readlines()``` считываем все строки файла с логами, затем вычисляем длину получившегося списка,
таким образом получая количество всех запросов. Результат записываем в файл нужного формата.

### Задание 2 - Общее количество запросов по типу
С помощью генератора списка получаем тип запроса всех строк в файле. 
Далее создаём объект класса ```Counter``` и при помощи метода ```most_common()``` получаем количество вхождений
каждого типа запроса. Записываем результат в файл нужного формата.

### Задание 3 - Топ 10 самых частых запросов
С помощью генератора списка получаем URL всех запросов. Создаём объект класса ```Counter``` 
и при помощи метода ```most_common(10)``` получаем 10 наиболее часто встречающихся URL-ов. 
Выводим результат в файл нужного формата.

### Задание 4 - Топ 5 самых больших по размеру запросов, которые завершились клиентской (4ХХ) ошибкой
С помощью генератора списков создаём список из кортежей, в которых хранятся URL, код ответа, размер и IP-адрес каждого запроса с 
кодом ответа ```4xx```.
Полученный список кортежей сортируем по значению размера в обратном порядке. Записываем первые 5 элементов отсортированного списка
в файл нужного формата.

### Задание 5 - Топ 5 пользователей по количеству запросов, которые завершились серверной (5ХХ) ошибкой
С помощью генератора списка получаем IP всех запросов, код ответа которых совпадает с шаблоном ```5xx```. 
Создаём объект класса ```Counter``` и при помощи метода ```most_common(5)``` получаем 5 наиболее часто встречающихся
IP-адресов, запросы от которых завершились с ```5xx``` ошибкой. Записываем результат в файл нужного формата.

## Плюсы и минусы решения на Bash и на Python

### Bash

#### Плюсы
+ Перенаправление ввода-вывода, pipe'ы
+ Легкий запуск других программ
+ Компактное решение сложных задач

#### Минусы
- Не является языком программирования общего назначения
- Проблемы с переносимостью на другие платформы (например, Windows)

### Python

#### Плюсы
+ Переносимость
+ Батарейки из коробки
+ Понятный и красивый синтаксис
+ Сообщество

#### Минусы
- Для решения данной задачи не нашёл
